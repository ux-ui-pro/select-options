{"mappings":"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","sources":["src/SelectOptions.js"],"sourcesContent":["class SelectOptions {\n  #selectContainer;\n\n  #floatingLabel;\n\n  #notches = [];\n\n  #customSelects = [];\n\n  #openSelect = null;\n\n  #resizeObserver;\n\n  #mobileMode = false;\n\n  constructor({ mobileMode = false } = {}) {\n    this.#mobileMode = mobileMode;\n    this.#selectContainer = [...document.querySelectorAll('.select-option-container select')];\n    this.#floatingLabel = [...document.querySelectorAll('.floating-label')];\n\n    this.#resizeObserver = new ResizeObserver((entries) => {\n      entries.forEach((entry) => {\n        const notch = entry.target.closest('.notched-outline')?.querySelector('.notched-outline__notch');\n\n        if (notch) SelectOptions.#setNotchWidth(notch, SelectOptions.#getNotchWidth(notch));\n      });\n    });\n  }\n\n  #notched() {\n    this.#floatingLabel.forEach((label) => {\n      const notchedOutline = label.closest('.notched-outline') ?? SelectOptions.#createNotchedOutline(label);\n\n      this.#notches.push({ container: notchedOutline.parentNode, notch: notchedOutline.querySelector('.notched-outline__notch') });\n\n      const lastNotch = this.#notches.at(-1).notch;\n\n      SelectOptions.#setNotchWidth(lastNotch, SelectOptions.#getNotchWidth(lastNotch));\n\n      this.#resizeObserver.observe(notchedOutline.querySelector('.floating-label'));\n    });\n  }\n\n  static #createNotchedOutline(label) {\n    const notchedOutline = document.createElement('div');\n\n    notchedOutline.classList.add('notched-outline');\n    notchedOutline.innerHTML = `\n      <div class=\"notched-outline__leading\"></div>\n      <div class=\"notched-outline__notch\">${label.outerHTML}</div>\n      <div class=\"notched-outline__trailing\"></div>\n    `;\n    label.replaceWith(notchedOutline);\n\n    return notchedOutline;\n  }\n\n  static #setNotchWidth(notch, width) {\n    const localNotch = notch;\n\n    localNotch.style.width = width;\n  }\n\n  static #getNotchWidth(notch) {\n    const label = notch.querySelector('.floating-label');\n\n    return label ? `${(parseFloat(getComputedStyle(label).width) + 13) * 0.75}px` : 'auto';\n  }\n\n  #setupCustomSelect(selectElement, customSelect, options) {\n    const selectTrigger = customSelect.querySelector('.select-option-trigger') ?? document.createElement('div');\n    const selectItems = customSelect.querySelector('.select-option-list') ?? document.createElement('div');\n\n    selectTrigger.classList.add('select-option-trigger');\n    selectItems.classList.add('select-option-list');\n\n    customSelect.append(selectTrigger, selectItems);\n\n    this.#createOptions(selectElement, selectTrigger, selectItems, options);\n\n    if (!(this.#mobileMode && SelectOptions.#isMobileDevice())) {\n      selectTrigger.addEventListener('click', (e) => {\n        e.stopPropagation();\n\n        if (this.#openSelect === customSelect) {\n          this.#closeDropdown(customSelect);\n        } else {\n          this.#openDropdown(customSelect);\n        }\n      });\n    }\n\n    SelectOptions.#updateCustomSelectState(customSelect, selectElement);\n\n    this.#customSelects.push(customSelect);\n\n    selectElement.addEventListener('change', () => {\n      this.#updateCustomSelect(selectElement, customSelect, options);\n    });\n\n    if (this.#mobileMode && SelectOptions.#isMobileDevice()) {\n      customSelect.classList.add('select-option--mobile');\n    }\n  }\n\n  #createOptions(selectElement, selectTrigger, selectItems, options) {\n    const trigger = selectTrigger;\n    const items = selectItems;\n\n    items.innerHTML = '';\n\n    options.forEach((option, index) => {\n      const selectItem = document.createElement('div');\n\n      selectItem.classList.add('select-option-list-item');\n      selectItem.textContent = option.textContent;\n\n      const labelValue = option.getAttribute('label');\n\n      if (labelValue) selectItem.classList.add(`select-option-list-item--${labelValue}`);\n\n      if (option.selected) {\n        selectItem.classList.add('select-option-list-item--selected');\n        trigger.textContent = option.textContent;\n\n        if (labelValue) trigger.classList.add(`select-option-trigger--${labelValue}`);\n      }\n\n      selectItem.addEventListener('click', () => this.#selectItem(selectItem, trigger, selectElement, index, items));\n      items.appendChild(selectItem);\n    });\n  }\n\n  #updateCustomSelect(selectElement, customSelect, options) {\n    const selectTrigger = customSelect.querySelector('.select-option-trigger');\n    const selectItems = customSelect.querySelector('.select-option-list');\n    const { selectedIndex } = selectElement;\n    const selectedOption = options[selectedIndex];\n    const labelValue = selectedOption.getAttribute('label');\n    const trigger = selectTrigger;\n\n    trigger.textContent = selectedOption.textContent;\n    trigger.classList.remove(...Array.from(trigger.classList).filter((cls) => cls.startsWith('select-option-trigger--')));\n\n    if (labelValue) {\n      trigger.classList.add(`select-option-trigger--${labelValue}`);\n    }\n\n    customSelect.classList.toggle('select-option--selected', selectedIndex > 0);\n\n    this.#createOptions(selectElement, trigger, selectItems, options);\n  }\n\n  #selectItem(selectItem, selectTrigger, selectElement, index, selectItems) {\n    const customSelect = selectTrigger.closest('.select-option');\n    const items = Array.from(selectItems.children);\n\n    items.forEach((item) => item.classList.remove('select-option-list-item--selected'));\n    selectItem.classList.add('select-option-list-item--selected');\n\n    const updatedSelectTrigger = selectTrigger;\n    const updatedSelectElement = selectElement;\n\n    updatedSelectTrigger.textContent = selectItem.textContent;\n    updatedSelectElement.selectedIndex = index;\n\n    updatedSelectTrigger.classList.remove(...Array.from(updatedSelectTrigger.classList).filter((cls) => cls.startsWith('select-option-trigger--')));\n\n    const selectedOption = updatedSelectElement.options[index];\n    const labelValue = selectedOption.getAttribute('label');\n\n    if (labelValue) updatedSelectTrigger.classList.add(`select-option-trigger--${labelValue}`);\n\n    customSelect.classList.toggle('select-option--selected', index > 0);\n    updatedSelectElement.dispatchEvent(new Event('change'));\n\n    this.#closeDropdown(customSelect);\n  }\n\n  #closeDropdown(customSelect) {\n    customSelect.classList.remove('select-option--opened');\n\n    this.#openSelect = null;\n  }\n\n  #openDropdown(customSelect) {\n    this.#closeOpenedDropdowns();\n\n    customSelect.classList.add('select-option--opened');\n\n    this.#openSelect = customSelect;\n  }\n\n  #closeOpenedDropdowns(e) {\n    this.#customSelects.forEach((dropdown) => {\n      if (!e || !dropdown.contains(e.target)) dropdown.classList.remove('select-option--opened');\n    });\n\n    this.#openSelect = null;\n  }\n\n  static #checkAndSetDownstairsClass(customSelect) {\n    const rect = customSelect.getBoundingClientRect();\n\n    customSelect.classList.toggle('select-option--downstairs', rect.bottom + 160 > window.innerHeight);\n  }\n\n  #handleResize() {\n    this.#customSelects.forEach(SelectOptions.#checkAndSetDownstairsClass);\n  }\n\n  static #isMobileOS() {\n    return (/android/i.test(navigator.userAgent || navigator.vendor))\n      || ((/iPad|iPhone|iPod/.test(navigator.userAgent || navigator.vendor)) && !('MSStream' in window));\n  }\n\n  static #isTouchDevice() {\n    return 'ontouchstart' in window || navigator.maxTouchPoints > 0\n      || window.matchMedia('(hover: none) and (pointer: coarse)').matches;\n  }\n\n  static #isMobileDevice() {\n    return SelectOptions.#isTouchDevice() || SelectOptions.#isMobileOS();\n  }\n\n  static #updateCustomSelectState(customSelect, selectElement) {\n    const hasLabel = customSelect.querySelector('label.floating-label') !== null;\n\n    customSelect.classList.toggle('select-option--labeled', hasLabel);\n    customSelect.classList.toggle('select-option--unlabeled', !hasLabel);\n    customSelect.classList.toggle('select-option--selected', hasLabel && selectElement.selectedIndex > 0);\n  }\n\n  async init() {\n    this.#notched();\n\n    this.#selectContainer.forEach((selectElement) => {\n      const customSelect = selectElement.closest('.select-option-container')?.querySelector('.select-option');\n      const options = [...selectElement.options];\n\n      if (customSelect) {\n        this.#setupCustomSelect(selectElement, customSelect, options);\n\n        SelectOptions.#checkAndSetDownstairsClass(customSelect);\n      }\n    });\n\n    document.addEventListener('click', this.#closeOpenedDropdowns.bind(this));\n    window.addEventListener('resize', this.#handleResize.bind(this));\n    window.addEventListener('scroll', this.#handleResize.bind(this));\n  }\n}\n\nexport default SelectOptions;\n"],"names":[],"version":3,"file":"index.js.map"}